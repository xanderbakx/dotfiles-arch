!function(t){"function"==typeof define&&define.amd?define(t):window.purl=t()}(function(){function t(t,r){for(var e=decodeURI(t),n=l[r?"strict":"loose"].exec(e),a={attr:{},param:{},seg:{}},i=14;i--;)a.attr[h[i]]=n[i]||"";return a.param.query=o(a.attr.query),a.param.fragment=o(a.attr.fragment),a.seg.path=a.attr.path.replace(/^\/+|\/+$/g,"").split("/"),a.seg.fragment=a.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),a.attr.base=a.attr.host?(a.attr.protocol?a.attr.protocol+"://"+a.attr.host:a.attr.host)+(a.attr.port?":"+a.attr.port:""):"",a}function r(t){var r=t.tagName;return"undefined"!=typeof r?p[r.toLowerCase()]:r}function e(t,r){if(0===t[r].length)return t[r]={};var e={};for(var n in t[r])e[n]=t[r][n];return t[r]=e,e}function n(t,r,a,o){var i=t.shift();if(i){var f=r[a]=r[a]||[];"]"==i?u(f)?""!==o&&f.push(o):"object"==typeof f?f[c(f).length]=o:f=r[a]=[r[a],o]:~i.indexOf("]")?(i=i.substr(0,i.length-1),!m.test(i)&&u(f)&&(f=e(r,a)),n(t,f,i,o)):(!m.test(i)&&u(f)&&(f=e(r,a)),n(t,f,i,o))}else u(r[a])?r[a].push(o):"object"==typeof r[a]?r[a]=o:"undefined"==typeof r[a]?r[a]=o:r[a]=[r[a],o]}function a(t,r,e){if(~r.indexOf("]")){var a=r.split("[");n(a,t,"base",e)}else{if(!m.test(r)&&u(t.base)){var o={};for(var f in t.base)o[f]=t.base[f];t.base=o}""!==r&&i(t.base,r,e)}return t}function o(t){return s(String(t).split(/&|;/),function(t,r){try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(e){}var n=r.indexOf("="),o=f(r),i=r.substr(0,o||n),s=r.substr(o||n,r.length);return s=s.substr(s.indexOf("=")+1,s.length),""===i&&(i=r,s=""),a(t,i,s)},{base:{}}).base}function i(t,r,e){var n=t[r];"undefined"==typeof n?t[r]=e:u(n)?n.push(e):t[r]=[n,e]}function f(t){for(var r,e,n=t.length,a=0;n>a;++a)if(e=t[a],"]"==e&&(r=!1),"["==e&&(r=!0),"="==e&&!r)return a}function s(t,r){for(var e=0,n=t.length>>0,a=arguments[2];n>e;)e in t&&(a=r.call(void 0,a,t[e],e,t)),++e;return a}function u(t){return"[object Array]"===Object.prototype.toString.call(t)}function c(t){var r=[];for(var e in t)t.hasOwnProperty(e)&&r.push(e);return r}function d(r,e){return 1===arguments.length&&r===!0&&(e=!0,r=void 0),e=e||!1,r=r||window.location.toString(),{data:t(r,e),attr:function(t){return t=g[t]||t,"undefined"!=typeof t?this.data.attr[t]:this.data.attr},param:function(t){return"undefined"!=typeof t?this.data.param.query[t]:this.data.param.query},fparam:function(t){return"undefined"!=typeof t?this.data.param.fragment[t]:this.data.param.fragment},segment:function(t){return"undefined"==typeof t?this.data.seg.path:(t=0>t?this.data.seg.path.length+t:t-1,this.data.seg.path[t])},fsegment:function(t){return"undefined"==typeof t?this.data.seg.fragment:(t=0>t?this.data.seg.fragment.length+t:t-1,this.data.seg.fragment[t])}}}var p={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},h=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],g={anchor:"fragment"},l={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},m=/^[0-9]+$/;return d.jQuery=function(t){null!=t&&(t.fn.url=function(e){var n="";return this.length&&(n=t(this).attr(r(this[0]))||""),d(n,e)},t.url=d)},d.jQuery(window.jQuery),d});